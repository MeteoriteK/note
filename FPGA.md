# FPGA

## 洗脑



















## CLB

Xilinx FPGA基本单元CLB，包括两个Slices，每个Slices又由4个LUT(查找表)，8个寄存器以及一些门电路组成

### FPGA容量

#### Slices单元

1个Slice=4个6输入LUT+8个触发器(flip-flop)+算数运算逻辑         每个LUT分配一个触发器可以配置成锁存器

Slice类型:SLICEL，SLICEM。后者可以当作分布式RAM或ROM，或实现移位寄存器

#### 逻辑单元

### FPGA Slice功能

四个逻辑函数生成器

8个存储单元

多功能多路复选器

快速进位逻辑

#### LUT查找表

#### 寄存器、触发器、锁存器

#### RAM、ROM

#### 移位寄存器

#### 多路复选器

#### 进位逻辑



## 加法逻辑运算

## 时序逻辑和组合逻辑

## Verilog入门

### 基础语法

#### 逻辑值

逻辑0

逻辑1

逻辑X

逻辑Z

#### 数制

位宽

二进制      4’b

八进制      4’o

十进制      4’d

十六进制  4’h

#### 标识符

用于定义模块名、端口名、信号名



#### 数据类型

##### 寄存器

抽象的数据存储单元

 ```verilog
reg [:] name;
 ```

只能在```always```和```initial```语句中被赋值，未赋值时为X

时序逻辑中对应触发器，组合逻辑中对应硬件连线

##### 线网

表示结构实体之间的物理连线

```verilog
wire [:] name;
tri [:] name;
```

不能存储值，由驱动它的元件决定，未赋值时为Z

驱动线网变量类型的元件有门、连续赋值语句、```assign```

##### 参数类型

```verilog
parameter name = value;
```

常用于定义状态机的状态、数据位宽和延迟大小等



#### 运算符

##### 算数运算符

整除保留整数

##### 关系运算符

##### 逻辑运算符

```verilog
!、&&、||
```

##### 条件操作符

```Ver
?:
```

##### 位运算符

```Ver
~、&、|、^
```

##### 移位运算符

左移位宽增加，右移不变

##### 拼接运算符

```verilog
{,}
```



### Verilog程序框架

#### 注释

 ```verilog
//
/*

*/
 ```

#### 关键字

#### 程序框架

基本设计单元“模块”，一部分用于描述接口，另一部分描述逻辑功能

程序组成：端口定义、IO说明、内部信号说明、功能定义

功能定义方法：```assign```、```always```、例化实例原件



### Verilog高级知识点

#### 结构语句

```initial```语句在模块中只执行一次，常用于测试文件产生测试信号，或对存储器变量赋初值

```verilog
initial begin
    ;
end
```

```always```语句一直不断重复活动，沿触发或者电平触发

```verilog
always @(*) begin
    ;
end
```

#### 赋值语句

阻塞赋值```=```：计算RHS并更新LHS

非阻塞赋值```<=```：赋值开始时计算RHS，赋值结束后更新LHS

非阻塞赋值只能对寄存器变量进行赋值



#### 条件语句

```verilog
if()
    ;
else if()
    ;
```

必须在过程块中使用，操作语句可以用```begin```和```end```，允许嵌套

```verilog
case(x)
    x1: ;
    x2: ;
    default: ;
endcase  Z
```

```casez```比较时不考虑Z

```casex```比较时不考虑Z和X



## 状态机

在有限个状态之间按一定的规律转换的时序电路

#### 状态机模型

Mealy状态机与输入有关

Moore状态机只与当前状态有关



#### 状态机设计

##### 状态空间定义

##### 状态跳转（时序逻辑）

##### 下个状态判断（组合逻辑）

##### 各个状态下的动作

增加一级寄存器实现时序逻辑输出













